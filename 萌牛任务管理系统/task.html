<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>萌牛任务管理系统</title>
    <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="assets/layui/css/layui.css">
    <link rel="stylesheet" href="assets/css/common.css">
    <script type="text/javascript" src="assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/common.js"></script>
</head>

<body>
    <div class="header">
        <div class="logo"><img src="assets/images/logo.png"><span class="text">萌牛任务管理系统</span></div>
        <div class="header-right">
            <ul>
                <li class="itme-notice">
                    <a href="javascript:;"><i class="layui-icon layui-icon-notice"></i><span class="point"></span></a>
                </li>
                <li class="item-theme">
                    <a href="javascript:;"><i class="layui-icon layui-icon-theme"></i></a>
                    <div class="submenu">
                        <dl>
                            <dd><a href="javascript:;" onclick="theme.set('default')"><span class="theme-color black"></span> 默认</a></dd>
                            <dd><a href="javascript:;" onclick="theme.set('orange')"><span class="theme-color orange"></span> 橙色</a></dd>
                            <dd><a href="javascript:;" onclick="theme.set('blue')"><span class="theme-color blue"></span> 蓝色</a></dd>
                        </dl>
                    </div>
                </li>
                <li class="item-user">
                	<a href="javascript:;"><span class="user-avatar"><img src="" style="display: none"><span class="name">张三</span></span><span class="name">工号：001</span><span class="arrow"><i class="layui-icon layui-icon-down"></i></span></a>
                	<div class="submenu">
						<dl>
							<dd><a href="javascript:;" class="color-red">注销</a></dd>
						</dl>
					</div>
                </li>
            </ul>
        </div>
    </div>
    <div class="menu-bar">
        <div class="title"><i class="ico-dashboard"></i><span>仪表盘</span></div>
        <ul>
            <li><a href="index.html"><i class="ico-menu ico-menu-1"></i><span>人员管理</span></a></li>
            <li class="active"><a href="task.html"><i class="ico-menu ico-menu-2"></i><span>任务管理</span></a></li>
        </ul>
    </div>
    <div class="container">
        <div class="title-bar">
            <h3 class="title">任务管理</h3>
        </div>
        <div class="table-filter">
            <a class="btn btn-red" href="javascript:;" id="btnAdd">添加任务</a>
        </div>
        <table class="table">
            <thead>
                <tr>
                    <td>任务标题</td>
                    <td>执行人</td>
                    <td>时间</td>
                    <td>状态</td>
                    <td>操作</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><a href="javascript:;" class="btn-detail">XXXXXXXXXX</a></td>
                    <td>梁朝伟</td>
                    <td>2019.10.01 - 2019.11.01</td>
                    <td><span class="color-blue" class="btn-detail">待审核</span></td>
                    <td></td>
                </tr>
                <tr>
                    <td><a href="javascript:;" class="btn-detail">XXXXXXXXXX</a></td>
                    <td>梁朝伟</td>
                    <td>2019.10.01 - 2019.11.01</td>
                    <td><span class="color-red">已逾期</span></td>
                    <td></td>
                </tr>
                <tr>
                    <td><a href="javascript:;" class="btn-detail">XXXXXXXXXX</a></td>
                    <td>梁朝伟</td>
                    <td>2019.10.01 - 2019.11.01</td>
                    <td><span class="color-green">进行中</span></td>
                    <td></td>
                </tr>
                <tr>
                    <td><a href="javascript:;" class="btn-detail">XXXXXXXXXX</a></td>
                    <td>梁朝伟</td>
                    <td>2019.10.01 - 2019.11.01</td>
                    <td><span class="color-yellow">已完成</span></td>
                    <td></td>
                </tr>
            </tbody>
        </table>
        <div class="pagination">
            <span class="info">1/22</span>
            <a href="javascript:;" disabled>首页</a>
            <a href="javascript:;" class="active">1</a>
            <a href="javascript:;">2</a>
            <a href="javascript:;">3</a>
            <a href="javascript:;">4</a>
            <a href="javascript:;">5</a>
            <a href="javascript:;">5</a>
            <span class="info">....</span>
            <a href="javascript:;">19</a>
            <a href="javascript:;">20</a>
            <a href="javascript:;">尾页</a>
        </div>
    </div>
    <div class="modal-form" style="display: none" id="modalForm">
        <div class="row">
            <div class="label"><em class="required">*</em>任务标题：</div>
            <div class="det"><input type="text" class="text" id="title" placeholder="请输入任务标题"></div>
        </div>
        <div class="row">
            <div class="label"><em class="required"></em>任务描述：</div>
            <div class="det"><textarea type="text" class="text" id="desc" placeholder="请输入任务描述" rows="5"></textarea></div>
        </div>
        <div class="row">
            <div class="label"><em class="required">*</em>任务时间：</div>
            <div class="det">
                <input type="text" class="text" id="time" placeholder="请选择任务时间">
            </div>
        </div>
        <div class="row">
            <div class="label"><em class="required">*</em>指派对象：</div>
            <div class="det">
                <select class="text" id="user">
                    <option value="1">梁朝伟</option>
                    <option value="2">梁朝伟</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="label"><em class="required"></em>分配角色：</div>
            <div class="det">
                <select class="text" id="role">
                    <option value="1">角色1</option>
                    <option value="2">角色2</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="label"><em class="required"></em>文件：</div>
            <div class="det">
                <button type="button" class="layui-btn layui-btn-normal" id="file">
				<i class="layui-icon">&#xe67c;</i>上传图片
				</button>
            </div>
        </div>
        <div class="row btn-row">
            <a class="btn btn-blue" href="javascript:;" onclick="save()">保存</a>
            <a class="btn btn-gray" href="javascript:;" onclick="cancel()">取消</a>
        </div>
    </div>
    <!-- footer end -->
    <script src="assets/layui/layui.all.js"></script>
    <script type="text/javascript">
    $(function() {
		layui.use(['laydate'],function(){
			layui.laydate.render({
				elem: '#time', //指定元素
				range: true
			});
		})
        
        //执行实例
        var uploadInst = layui.upload.render({
            elem: '#file', //绑定元素
            url: '/upload/', //上传接口
            done: function(res) {
                //上传完毕回调
            },
            error: function() {
                //请求异常回调
            }
        });

		$('#btnAdd').click(function() {

		    layer.open({
		        type: 1,
		        area: '600px',
		        title: '添加任务',
		        content: $('#modalForm') //这里content是一个普通的String
		    });
		})

		$(document).on('click','.btn-detail',function(){
			layer.open({
		        type: 1,
		        area: '600px',
		        title: '添加任务',
		        content: $('#modalForm') //这里content是一个普通的String
		    });
		})

    });

    function save() {
        var data = {
            "title": $('#title').val(),
            "desc": $('#desc').val(),
            "time": $('#time').val(),
            "user": $('#user').val(),
            "role": $('#role').val(),
            "file": ''
        }
        if (!data.title) {
            return layer.msg('请输入任务标题');
        }
        // if (!data.desc) {
        //     return layer.msg('请输入任务描述');
        // }
        if (!data.time) {
            return layer.msg('请选择任务时间');
        }
        if (!data.user) {
            return layer.msg('请选择指派对象');
        }
        $.ajax({
            url: '#',
            method: "post",
            data: data,
            success: function(resp) {
                layer.msg('保存成功');
            },
            error: function(resp) {
                layer.msg('保存失败');
            }
        })
    }

    function cancel() {
        layer.close(layer.index);
    }
    </script>
</body>

</html>